(window.webpackJsonp=window.webpackJsonp||[]).push([["cart-global"],{"./src/assets/js/mixins/cart-data.js":function(V,g,f){"use strict";function m(t){return w(t)||k(t)||S(t)||P()}function P(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(t,e){if(t){if(typeof t=="string")return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}function k(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function w(t){if(Array.isArray(t))return h(t)}function h(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function s(t){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?_(Object(e),!0).forEach(function(r){D(t,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):_(Object(e)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))});return t}function D(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}f.r(g);var p=f("./node_modules/vuex/dist/vuex.esm.js"),v=f("./src/assets/js/utils/general.js"),j=f("./src/assets/js/lib/wishlist.js"),A=f("./node_modules/dom-select/index.js"),y=f.n(A);g.default={props:["prefix"],data:function(){return{donateProduct:{},recommendedProducts:[],asyncDetailsFetched:!1,donateVariantId:null,isRemove:!1}},mounted:function(){this.getWishlistItems(),this.$root.$on("wishlistUpdated",this.updatedWishlist)},computed:s(s(s(s({},Object(p.mapState)("global",["cart"])),Object(p.mapState)("cart",["loading","isBootstrapped","open"])),Object(p.mapGetters)("cart",["subtotal"])),{},{isActive:function(){return this.open},cartStatus:function(){return this.open},cartItems:function(){return this.cart.items||[]},bundledItems:function(){var t=this,e={},n={donate:{},skin:{},beauty:{},unknown:{}};return this.cart.items.forEach(function(r){if(t.isProbablyBundled(r)){var o,a,i=(o=(a=r.properties)===null||a===void 0?void 0:a.bundle_uid)!==null&&o!==void 0?o:null;if(typeof e[i]=="undefined"&&(e[i]=t.isDonateItem(r)?"donate":t.isBeautyItem(r)?"beauty":t.isSkinItem(r)?"skin":"unknown"),typeof n[e[i]][i]=="undefined"){var u,c,d,l,b,I,O=(u=(c=(d=r.properties)===null||d===void 0?void 0:d.bundle_price)!==null&&c!==void 0?c:r.final_price)!==null&&u!==void 0?u:0,B=parseInt(i.split("_")[0]);n[e[i]][i]=s(s({},r),{},{items:[],isBundle:!0,id:i,properties:r.properties,product_title:(l=(b=(I=r.properties)===null||I===void 0?void 0:I.bundle_title)!==null&&b!==void 0?b:r.product_title)!==null&&l!==void 0?l:null,price:O,line_price:O*r.quantity,product_id:B})}n[e[i]][i].items.push(r)}}),Object.keys(n).forEach(function(r){Object.keys(n[r]).forEach(function(o){n[r][o].items=n[r][o].items.sort(function(a,i){var u,c,d,l;return parseInt((u=(c=a.properties)===null||c===void 0?void 0:c.bundle_index)!==null&&u!==void 0?u:0)-parseInt((d=(l=i.properties)===null||l===void 0?void 0:l.bundle_index)!==null&&d!==void 0?d:0)})})}),n},beautyItems:function(){var t=this,e=[].concat(m(Object.values(this.bundledItems.beauty)),m(this.cart.items.filter(function(n){return t.isBeautyItem(n)&&!t.isProbablyBundled(n)})));return e},skinItems:function(){var t=this;return[].concat(m(Object.values(this.bundledItems.skin)),m(this.cart.items.filter(function(e){return t.isSkinItem(e)&&!t.isProbablyBundled(e)})))},donateItems:function(){var t=this,e=[].concat(m(Object.values(this.bundledItems.donate)),m(this.cart.items.filter(function(n){return t.isDonateItem(n)&&!t.isProbablyBundled(n)})));return e},otherItems:function(){var t=this;return this.cart.items.filter(function(e){return!t.isSkinItem(e)&&!t.isBeautyItem(e)&&!t.isDonateItem(e)&&!t.isProbablyBundled(e)})},beautyItemsCountText:function(){return this.getVendorItemsLength("beautyItems")===1?"".concat(this.getVendorItemsLength("beautyItems")," product"):"".concat(this.getVendorItemsLength("beautyItems")," products")},skinItemsCountText:function(){return this.getVendorItemsLength("skinItems")===1?"".concat(this.getVendorItemsLength("skinItems")," product"):"".concat(this.getVendorItemsLength("skinItems")," products")},cartTotal:function(){var t=this;return setTimeout(function(){typeof Afterpay!="undefined"&&(y.a.all(".header-cart__footer__afterpay afterpay-placement").forEach(function(e){e.remove()}),y.a.all(".cart-grid__checkout-footer afterpay-placement").forEach(function(e){e.remove()}),y.a.all(".cart-checkout-mobile__footer afterpay-placement").forEach(function(e){e.remove()}),Afterpay.createPlacements({targetSelector:".header-cart__footer__afterpay-prefix",attributes:{currency:"USD",locale:"en_US",amount:parseFloat(t.cart.total_price/100)}}),Afterpay.createPlacements({targetSelector:".cart-grid__checkout-footer-afterpay",attributes:{currency:"USD",locale:"en_US",amount:parseFloat(t.cart.total_price/100)}}),Afterpay.createPlacements({targetSelector:".cart-checkout-mobile__footer-afterpay",attributes:{currency:"USD",locale:"en_US",amount:parseFloat(t.cart.total_price/100)}}))},1e3),Object(v.formatPrice)(this.cart.total_price)},discountTotal:function(){return this.cart.total_discount===0?0:Object(v.formatPrice)(this.cart.total_discount)},itemCountText:function(){var t=this.cartItems.reduce(function(e,n){return e+=n.quantity,e},0);return t===1?this.$t("cart.general.items.one",{count:t}):this.$t("cart.general.items.other",{count:t})},isEmpty:function(){return this.cart.items.length===0},afterPayText:function(){return"Or 4 interest-free installments of $".concat((this.cart.total_price/4/100).toFixed(2))},donateId:function(){var t;return(t=__GLOBAL__.donateProduct.productId)!==null&&t!==void 0?t:null},defaultDonateVariantId:function(){var t;return(t=__GLOBAL__.donateProduct.variantId)!==null&&t!==void 0?t:null}}),methods:s(s(s({},Object(p.mapActions)("cart",["addToCart"])),Object(p.mapActions)("global",["requestRewardsCollection","updateWishlistItems"])),{},{isBeautyItem:function(t){return t.vendor==="Fenty Beauty"&&!this.isDonateItem(t)},isSkinItem:function(t){return t.vendor==="Fenty Skin"&&!this.isDonateItem(t)},isDonateItem:function(t){return this.donateId&&t.product_id.toString()===this.donateId.toString()},isProbablyBundled:function(t){var e,n,r,o,a,i;return(e=(n=t.properties)===null||n===void 0?void 0:n.bundle_uid)!==null&&e!==void 0&&e&&(r=(o=t.properties)===null||o===void 0?void 0:o.bundle_validated)!==null&&r!==void 0&&r||(a=(i=t.properties)===null||i===void 0?void 0:i.bundle_uid)!==null&&a!==void 0&&a&&this.loading==="cartBundles"},getVendorItemsLength:function(t){var e=0;return this[t]?(this[t].forEach(function(n){e+=n.isBundle?n.items.length*n.quantity:1*n.quantity}),e):0},priceFormat:function(t){return Object(v.formatPrice)(t)},redirectToCheckout:function(){document.location="/checkout"},onChangeDonate:function(t){this.donateVariantId=t},onAddDonateToCart:function(){this.donateVariantId||(this.donateVariantId=this.defaultDonateVariantId.toString()),this.addToCart({id:this.donateVariantId,quantity:1}),this.donateVariantId=this.defaultDonateVariantId.toString()},onRemove:function(t){this.cartRemoveFunction=t,this.isRemove=!0},onConfirmRemove:function(t){t&&this.cartRemoveFunction(),this.isRemove=!1},requestAsyncDetails:function(){var t=this;fetch("/?view=cart").then(function(e){return e.json()}).then(function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},n=e.donateProduct,r=n===void 0?{}:n,o=e.recommendedProducts,a=o===void 0?[]:o;t.asyncDetailsFetched=!0,t.recommendedProducts=a,t.donateProduct=r})},getWishlistItems:function(){var t=this;j.default.getProducts().then(function(e){t.updateWishlistItems(e.map(function(n){return n.id}))})},updatedWishlist:function(){j.default.getProducts()}})}}}]);
//# sourceMappingURL=/s/files/1/0341/3458/9485/t/528/assets/cart-global.js.map?version=1643646135568
